# 多语言下一个版本的需求梳理

> 经过讨论，下一个版本将会是`ext-intl`和**多语言词条平台**两部分组成，`ext-intl`除了负责提取多语言词条和原处修改词条以外，还将具备从远程匹配其他语言词条并自动填充的功能。而**多语言词条平台**是一个完全独立的词库平台，具备按应用管理词条的能力，对外也提供了包含获取词条等能力

## 总览

### 下一个版本的多语言开发流程

1. 进行正常的业务开发，开发过程中使用中文词条
2. 开发前或者开发中相关人员到**多语言词库平台**上维护本期迭代需要的词条
3. 业务开发完毕，使用`ext-intl`提取中文，生成词条文件和填充对于语言的词条
4. 没有匹配到的词条将不会填充，并且可选词条自动上传至词库平台
5. 词条维护好后（新增词条/修改词条翻译/修改词条 key 等），运行`ext-intl`的`update`逻辑进行远程同步

### ext-intl 具备的能力

- 基于`AST`的高准确度的中文提取和源码修改
- 支持中文词条跳过提取（特殊注释的方式）
- 检测到词条的同时，支持与同步到项目中的对照表进行词条匹配的能力
- 支持单一版本的增量式多语言提取
- 同步远程词条到本地生成对照表
- 支持基于对照表的本地词条更新

### 多语言词库平台能力

- 基于团队的用户体系
- 基于应用的词库维护方式
- 提供对外能力

## 需求描述

### 用户体系

> 用户体系的基础是基于团队和邀请制

#### 用户注册和登录

> 用户使用邮箱进行注册，并且设置 6 位密码，发送验证邮件，验证成功后需要补充用户手机号信息（可选）

- 注册需要填写的字段：邮箱号 用户 id 用户昵称 6 位密码
- 注册成功后需要通过邮箱验证（点击验证邮件链接）
- 使用用户 id 或邮箱号和 6 位密码登录
- 登陆后需要绑定手机信息（可选）

#### 团队管理

- 团队基本信息维护
- 邀请成员（通过成员邮箱发送注册邀请邮件），成员注册成功后，自动加入团队
- 成员管理，分配每个成员权限（读，写，应用管理），移除成员
- 成员可以加入多个团队，如果某个成员已经注册，则发送团队邀请邮件，操作后加入团队

#### 忘记密码

- 忘记密码 通过邮箱找回（发送邮件->点击邮件链接->重设密码）

### 应用体系

> 应用体系的前提是：生成 API Key 用于和外部交互，关联团队方便协作

- 点击新建应用 填写应用基本信息：名称 描述 类别 logo 等 关联团队 填写成功后 会生成应用 id 和应用 API key，应用 API key 只能由应用创建人查看

- 新建应用成功后，可以点击应用，选择应用管理/词条管理，进入相关页面
- 词条管理页面可以查看当前应用维护的词条，可以进行完整度筛选，完整度定义（未维护 部分维护 全语言维护）词条设计成块 通过背景色感知%，支持安语言模糊查询
- 新增词条：输入中文词条，查询当前用户下应用和公共词条库，给出模糊匹配结果，如果包含结果用户可以选择加入到当前应用，也可以选择新建词条，然后进行该词条的维护，词条除了多语言翻译以外，还可以自定义标签
- 词条管理：词条禁用 禁用后的词条不会被外部接口获取；加入公共词库 加入公共词库后，可以供所有用户获取

### 公共词库

> 公共词库可供任何用户使用（即使是未登录用户）

### 对外 API

#### 获取某个应用下的所有词条

> 通过传入应用 APIkey 获取当前应用所有词条数据

#### 未翻译词条上报

> 需要应用支持勾选该功能，同样传入应用 APIkey 上传所有词条，上传后会在该应用下生成词条
